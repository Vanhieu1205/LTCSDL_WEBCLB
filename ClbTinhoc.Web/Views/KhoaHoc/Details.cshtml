@model ClbTinhoc.Web.Models.KhoaHoc

@{
    ViewData["Title"] = "Chi tiết khóa học";
}

<h1>Chi tiết khóa học</h1>

<div>
    <hr />
    <div class="row">
        <div class="col-md-4">
            <img src="~/images/@Model.image" class="img-fluid rounded" alt="@Model.TenKhoaHoc" onerror="this.src='/images/default-course.png'" />
        </div>
        <div class="col-md-8">
            <dl class="row">
                <dt class="col-sm-3">Tên khóa học</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.TenKhoaHoc)</dd>

                <dt class="col-sm-3">Mô tả</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.MoTa)</dd>

                <dt class="col-sm-3">Ngày bắt đầu</dt>
                <dd class="col-sm-9">@Model.NgayBatDau.ToString("dd/MM/yyyy")</dd>

                <dt class="col-sm-3">Ngày kết thúc</dt>
                <dd class="col-sm-9">@Model.NgayKetThuc.ToString("dd/MM/yyyy")</dd>
            </dl>
        </div>
    </div>

    <h3 class="mt-4">Danh sách lớp học</h3>
    @if (Model.LopHoc != null && Model.LopHoc.Any())
    {
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Mã lớp</th>
                    <th>Tên lớp</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var lop in Model.LopHoc)
                {
                    <tr>
                        <td>@lop.MaLopHoc</td>
                        <td>@lop.TenLopHoc</td>
                        <td>
                            <a asp-controller="LopHoc" asp-action="Details" asp-route-id="@lop.MaLopHoc" class="btn btn-sm btn-info">Chi tiết</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p>Chưa có lớp học nào cho khóa học này.</p>
    }

    <h3 class="mt-4">Danh sách sinh viên tham gia</h3>
    @if (Model.KhoaHoc_SinhVien != null && Model.KhoaHoc_SinhVien.Any())
    {
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Mã sinh viên</th>
                    <th>Họ tên</th>
                    <th>Lớp sinh hoạt</th>
                    <th>Email</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var ks in Model.KhoaHoc_SinhVien)
                {
                    <tr>
                        <td>@ks.MaSinhVien</td>
                        <td>@ks.SinhVien.HoTen</td>
                        <td>@ks.SinhVien.LopSinhHoat</td>
                        <td>@ks.SinhVien.Email</td>
                        <td>
                            <a asp-controller="SinhVien" asp-action="Details" asp-route-id="@ks.MaSinhVien" class="btn btn-sm btn-info">Chi tiết</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p>Chưa có sinh viên nào tham gia khóa học này.</p>
    }
</div>

<div class="mt-3">
    <a asp-action="Edit" asp-route-id="@Model.MaKhoaHoc" class="btn btn-warning">Sửa</a> |
    <a asp-action="Index" class="btn btn-secondary">Quay lại danh sách</a>
</div>